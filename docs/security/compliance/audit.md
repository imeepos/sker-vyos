# 合规审计 (/security/compliance/audit)

## 页面概述

合规审计页面提供全面的审计支持功能，包括审计准备、审计证据收集、审计过程管理、审计报告生成等，帮助企业顺利通过内部和外部合规审计。

## 核心功能

### 1. 审计项目管理
- 审计项目创建与配置
- 审计范围和标准定义
- 审计团队和角色分配
- 审计时间计划管理

### 2. 证据收集系统
- 自动化证据收集
- 证据分类和标记
- 证据完整性验证
- 审计轨迹记录

### 3. 审计过程跟踪
- 审计任务分配执行
- 审计进度实时监控
- 审计发现记录管理
- 问题跟踪和解决

### 4. 审计报告生成
- 标准化审计报告模板
- 自定义报告格式
- 审计结论和建议
- 合规证明文档

## 页面布局

### 顶部操作区域
```
┌─────────────────────────────────────────────────────────────────┐
│ [新建审计] [审计模板] [证据管理] [报告中心]  [搜索框] [状态▼] [类型▼] │
├─────────────────────────────────────────────────────────────────┤
│ 快速操作: [ISO27001审计] [SOX审计] [GDPR审计] [内部审计] [开始审计]  │
└─────────────────────────────────────────────────────────────────┘
```

### 审计概览仪表板
```
┌─────────────────────────────────────────────────────────────────┐
│ 审计状态概览                                                       │
├─────────────┬─────────────┬─────────────┬─────────────┬─────────────┤
│ 进行中审计     │ 完成的审计    │ 证据收集率    │ 发现问题数    │ 合规得分     │
│     3      │    12      │   87.5%    │    23     │   85/100   │
└─────────────┴─────────────┴─────────────┴─────────────┴─────────────┘
```

### 主要内容区域
```
┌─────────────────────┬───────────────────────────────────────────┐
│ 审计导航树            │ 审计项目列表                               │
├─────────────────────┼───────────────────────────────────────────┤
│ 📋 进行中审计 (3)     │ ┌─────────────────────────────────────────┐ │
│   ├ ISO 27001 年审  │ │ ISO 27001 年度内部审计                   │ │
│   ├ GDPR 合规检查   │ │ 审计类型: 内部审计    标准: ISO 27001     │ │
│   └ SOX 财务审计    │ │ 审计周期: 2024 Q1     状态: 🔄 进行中    │ │
│ ✅ 已完成审计 (12)   │ │ 审计团队: 5人         进度: 68%          │ │
│   ├ Q4 合规评估     │ │ 开始日期: 2024-03-01                    │ │
│   ├ 信息安全审计     │ │ 计划完成: 2024-03-31                    │ │
│   └ 风险管理审计     │ │ [查看详情] [审计发现] [证据清单]         │ │
│ 📅 计划中审计 (5)    │ └─────────────────────────────────────────┘ │
│   ├ Q2 季度审计     │                                         │
│   ├ 数据保护审计     │ ┌─────────────────────────────────────────┐ │
│   ├ 访问控制审计     │ │ GDPR 数据保护合规检查                    │ │
│   └ 网络安全审计     │ │ 审计类型: 合规检查    标准: GDPR         │ │
├─────────────────────┤ │ 审计周期: 月度        状态: 🟡 准备中    │ │
│ 证据库统计           │ │ 审计团队: 3人         进度: 25%          │ │
│ ┌─────────────────┐ │ │ 开始日期: 2024-03-15                    │ │
│ │ 📁 配置文件      │ │ │ 计划完成: 2024-03-25                    │ │
│ │    总计: 1,245   │ │ │ [查看详情] [开始审计] [分配任务]         │ │
│ │ 📄 日志文件      │ │ └─────────────────────────────────────────┘ │
│ │    总计: 3,567   │ │                                         │
│ │ 📊 报告文件      │ │ ┌─────────────────────────────────────────┐ │
│ │    总计: 234     │ │ │ SOX 财务系统控制审计                     │ │
│ │ 🔒 证书文件      │ │ │ 审计类型: 外部审计    标准: SOX          │ │
│ │    总计: 89      │ │ │ 审计周期: 年度        状态: ✅ 已完成    │ │
│ └─────────────────┘ │ │ 审计团队: 外部审计师   完成日期: 2024-02-28│ │
└─────────────────────┤ │ 审计结果: 通过        发现问题: 2个      │ │
                     │ │ [查看报告] [审计发现] [后续行动]         │ │
                     │ └─────────────────────────────────────────┘ │
                     └───────────────────────────────────────────┘
```

### 审计详情工作台
```
┌─────────────────────────────────────────────────────────────────┐
│ ISO 27001 年度内部审计 - 工作台                           [关闭 ×]   │
├─────────────────────────────────────────────────────────────────┤
│ 📊 审计进度 ████████████████████░░░░░░░░░░░░░░░░░░░ 68%         │
├─────────────────────────────────────────────────────────────────┤
│ 审计任务列表                            [新增任务] [批量分配] [导出] │
├──────┬─────────────────┬─────────┬─────────┬─────────┬─────────────┤
│ 状态  │ 审计项目          │ 负责人    │ 完成度   │ 截止日期  │ 操作         │
├──────┼─────────────────┼─────────┼─────────┼─────────┼─────────────┤
│ ✅   │ A.5.1 信息安全策略 │ 张三     │ 100%    │03-15    │[查看][证据]  │
│ 🔄   │ A.6.1 信息安全组织 │ 李四     │  75%    │03-18    │[查看][跟进]  │
│ 🔄   │ A.7.1 雇用前筛选  │ 王五     │  60%    │03-20    │[查看][督促]  │
│ ⏳   │ A.8.1 资产管理    │ 赵六     │  20%    │03-22    │[查看][分配]  │
│ ❌   │ A.9.1 访问控制    │ 未分配    │   0%    │03-25    │[分配][紧急]  │
└──────┴─────────────────┴─────────┴─────────┴─────────┴─────────────┘
├─────────────────────────────────────────────────────────────────┤
│ 审计发现和问题                                    [新增发现] [导出] │
├──────┬─────────────────┬─────────┬─────────┬─────────┬─────────────┤
│ 等级  │ 发现描述          │ 发现人    │ 状态     │ 发现日期  │ 操作         │
├──────┼─────────────────┼─────────┼─────────┼─────────┼─────────────┤
│ 🔴高  │ 防火墙规则过于宽松 │ 张三     │ 待整改   │03-12    │[详情][整改]  │
│ 🟡中  │ 日志保留期不足    │ 李四     │ 整改中   │03-14    │[详情][跟进]  │
│ 🟢低  │ 文档版本不统一    │ 王五     │ 已整改   │03-10    │[详情][验证]  │
└──────┴─────────────────┴─────────┴─────────┴─────────┴─────────────┘
├─────────────────────────────────────────────────────────────────┤
│ 证据收集状态                                      [上传证据] [管理] │
├─────────────────────────────────────────────────────────────────┤
│ 已收集证据: 156/180 (86.7%)                                    │
│ ┌─────────────────────────────────────────────────────────────┐ │
│ │ 证据类型分布:                                              │ │
│ │ 📄 策略文档: 23/25 (92%)     🔧 配置文件: 45/50 (90%)      │ │
│ │ 📊 审计日志: 67/75 (89%)     📋 检查清单: 21/30 (70%)      │ │
│ └─────────────────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────────────────┤
│ 最近活动                                                      │
│ • 14:30 张三 上传了防火墙配置文件                               │
│ • 14:25 李四 完成了 A.6.1 信息安全组织 的现场检查               │
│ • 14:20 王五 标记 A.7.1 雇用前筛选 为需要补充证据               │
│ • 14:15 系统自动收集了过去7天的审计日志                         │
└─────────────────────────────────────────────────────────────────┘
```

### 证据管理界面
```
┌─────────────────────────────────────────────────────────────────┐
│ 审计证据管理中心                          [上传] [批量下载] [搜索] │
├─────────────────────────────────────────────────────────────────┤
│ 证据分类筛选: [全部] [策略文档] [配置文件] [日志记录] [截图证明]    │
│ 审计项目筛选: [全部] [ISO27001] [GDPR] [SOX] [内部审计]          │
├─────────────────────────────────────────────────────────────────┤
│ 证据列表                                              [列表视图] │
├──────┬─────────────────┬─────────┬─────────┬─────────┬─────────────┤
│ 类型  │ 证据名称          │ 所属审计  │ 上传人   │ 上传时间  │ 操作         │
├──────┼─────────────────┼─────────┼─────────┼─────────┼─────────────┤
│ 📄   │ 信息安全策略v2.1  │ISO27001 │ 张三     │03-15    │[下载][预览]  │
│ 🔧   │ 防火墙配置快照    │ISO27001 │ 李四     │03-14    │[下载][验证]  │
│ 📊   │ 访问日志_3月     │GDPR     │ 系统     │03-13    │[下载][分析]  │
│ 📋   │ 员工培训记录     │ISO27001 │ 王五     │03-12    │[下载][审核]  │
│ 🖼️   │ 物理安全检查截图  │ISO27001 │ 赵六     │03-11    │[下载][标记]  │
└──────┴─────────────────┴─────────┴─────────┴─────────┴─────────────┘
├─────────────────────────────────────────────────────────────────┤
│ 证据统计信息                                                    │
│ ┌─────────────┬─────────────┬─────────────┬─────────────────────┐ │
│ │ 总证据数量   │ 验证通过率   │ 存储空间     │ 最近更新            │ │
│ │    1,234   │   94.5%    │  2.3 GB    │ 2024-03-15 14:30   │ │
│ └─────────────┴─────────────┴─────────────┴─────────────────────┘ │
└─────────────────────────────────────────────────────────────────┘
```

## API接口需求

### 审计项目管理
- **接口**: `GET /api/security/compliance/audits`
- **功能**: 获取审计项目列表
- **参数**: 分页、状态筛选、类型筛选
- **返回**: 审计项目基本信息

### 创建审计项目
- **接口**: `POST /api/security/compliance/audits`
- **功能**: 创建新的审计项目
- **参数**: 审计配置、范围、团队信息
- **返回**: 创建的审计项目信息

### 审计任务管理
- **接口**: `GET /api/security/compliance/audits/{id}/tasks`
- **功能**: 获取审计项目的任务列表
- **返回**: 详细任务信息和进度

### 证据上传接口
- **接口**: `POST /api/security/compliance/audits/{id}/evidence`
- **功能**: 上传审计证据文件
- **参数**: 文件数据、证据类型、关联任务
- **返回**: 上传结果和证据ID

### 审计发现管理
- **接口**: `POST /api/security/compliance/audits/{id}/findings`
- **功能**: 记录审计发现问题
- **参数**: 发现详情、严重程度、责任人
- **返回**: 发现记录信息

### 报告生成接口
- **接口**: `POST /api/security/compliance/audits/{id}/report`
- **功能**: 生成审计报告
- **参数**: 报告模板、输出格式
- **返回**: 报告文件或下载链接

## 审计管理模型

### 审计项目结构
```typescript
interface AuditProject {
  id: string
  name: string
  description: string
  auditType: 'internal' | 'external' | 'compliance' | 'certification'
  standard: string
  scope: AuditScope
  timeline: {
    plannedStart: string
    plannedEnd: string
    actualStart?: string
    actualEnd?: string
  }
  team: AuditTeam
  status: 'planned' | 'active' | 'paused' | 'completed' | 'cancelled'
  progress: number
}

interface AuditScope {
  departments: string[]
  systems: string[]
  processes: string[]
  locations: string[]
  exclusions?: string[]
}

interface AuditTeam {
  leadAuditor: string
  auditors: string[]
  technicalSupport?: string[]
  businessContacts: string[]
}
```

### 审计任务结构
```typescript
interface AuditTask {
  id: string
  auditId: string
  controlId: string
  controlName: string
  description: string
  assignee: string
  status: 'not_started' | 'in_progress' | 'completed' | 'blocked'
  priority: 'high' | 'medium' | 'low'
  dueDate: string
  progress: number
  evidenceRequired: string[]
  evidenceCollected: Evidence[]
  findings: Finding[]
}
```

### 证据管理结构
```typescript
interface Evidence {
  id: string
  name: string
  description: string
  type: 'document' | 'screenshot' | 'log' | 'configuration' | 'other'
  file: {
    name: string
    size: number
    mimeType: string
    hash: string
    url: string
  }
  metadata: {
    auditId: string
    taskId: string
    collectionDate: string
    collector: string
    source: string
  }
  verification: {
    status: 'pending' | 'verified' | 'rejected'
    verifier?: string
    verificationDate?: string
    notes?: string
  }
}
```

## 审计工作流

### 审计准备阶段
1. **项目规划**: 确定审计范围、标准和时间表
2. **团队组建**: 分配审计人员和角色
3. **资源准备**: 准备审计工具和模板
4. **沟通协调**: 与被审计部门协调配合

### 审计执行阶段
1. **开始会议**: 启动审计项目
2. **证据收集**: 系统化收集审计证据
3. **现场检查**: 实地验证控制措施
4. **问题记录**: 记录发现的问题和不符合项

### 审计报告阶段
1. **发现汇总**: 整理所有审计发现
2. **报告起草**: 编制审计报告初稿
3. **报告审核**: 内部审核报告质量
4. **报告发布**: 正式发布审计报告

### 跟踪改进阶段
1. **整改计划**: 制定问题整改计划
2. **整改跟踪**: 跟踪整改进展
3. **效果验证**: 验证整改效果
4. **经验总结**: 总结审计经验教训

## 组件设计

### 审计项目卡片
```vue
<AuditProjectCard
  :project="projectData"
  :showProgress="true"
  @start="handleStart"
  @pause="handlePause"
  @complete="handleComplete"
/>
```

### 任务管理组件
```vue
<AuditTaskManager
  :tasks="taskList"
  :editable="hasEditPermission"
  @assign="handleAssign"
  @update-status="handleStatusUpdate"
/>
```

### 证据上传组件
```vue
<EvidenceUploader
  :auditId="currentAuditId"
  :taskId="currentTaskId"
  :allowedTypes="['pdf', 'doc', 'xlsx', 'png', 'jpg']"
  @upload-success="handleUploadSuccess"
/>
```

### 审计报告生成器
```vue
<AuditReportGenerator
  :auditData="auditData"
  :templates="availableTemplates"
  :customizable="true"
  @generate="handleGenerate"
/>
```

## 质量保证

### 审计质量控制
- **四眼原则**: 重要审计发现需要二次确认
- **证据验证**: 所有证据需要验证真实性和完整性
- **过程监控**: 实时监控审计过程质量
- **标准遵循**: 严格遵循审计标准和规范

### 数据安全保障
- **访问控制**: 严格的证据访问权限控制
- **数据加密**: 敏感审计数据加密存储
- **审计轨迹**: 完整记录所有操作轨迹
- **数据备份**: 定期备份审计数据

## 权限管理

### 角色权限设计
- **审计主管**: 全面的审计管理权限
- **主审计员**: 审计项目执行权限
- **审计员**: 分配任务执行权限
- **技术支持**: 技术相关任务权限
- **被审计方**: 有限的查看和配合权限

### 数据保密控制
- **分级保密**: 按重要程度分级保护
- **需知原则**: 仅授权必要的访问权限
- **操作记录**: 完整记录所有数据访问
- **定期评估**: 定期评估权限合理性

## 集成能力

### 合规管理集成
- **标准库同步**: 与合规标准库集成
- **检查结果**: 集成合规检查结果
- **风险评估**: 集成风险评估数据
- **修复建议**: 关联修复建议系统

### 外部工具集成
- **文档管理**: 集成企业文档管理系统
- **工作流**: 集成企业工作流系统
- **通知系统**: 集成消息通知系统
- **身份认证**: 集成企业身份认证系统

## 报告模板

### 标准审计报告
- **执行摘要**: 审计概况和主要发现
- **审计范围**: 详细的审计范围说明
- **审计方法**: 使用的审计方法和标准
- **审计发现**: 详细的发现和证据
- **结论建议**: 审计结论和改进建议

### 合规证明报告
- **合规声明**: 合规状态正式声明
- **证据清单**: 支撑证据详细清单
- **风险评估**: 剩余风险评估
- **持续改进**: 持续改进计划

### 管理层报告
- **关键指标**: 关键合规指标摘要
- **风险状况**: 当前风险状况评估
- **改进进展**: 整改进展情况
- **资源需求**: 未来资源需求建议