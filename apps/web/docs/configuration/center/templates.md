# 配置管理 - 配置模板页面

## 页面功能

### 核心功能
- **配置模板管理** - 创建、编辑、删除配置模板
- **模板分类组织** - 按设备类型和功能分类管理模板
- **模板版本控制** - 管理模板的版本历史和变更
- **模板应用部署** - 将模板应用到目标设备

### 详细功能列表
1. 配置模板CRUD操作
2. 模板分类和标签管理
3. 模板变量和参数化
4. 模板预览和验证
5. 模板版本管理
6. 模板导入导出
7. 模板应用记录
8. 模板权限管理

## 页面布局

### 整体布局结构
```
┌─────────────────────────────────────────────┐
│        模板管理工具栏和搜索区域              │
├─────────────────────────────────────────────┤
│ ┌─────────┐                    ┌─────────┐  │
│ │ 模板    │                    │ 模板    │  │
│ │ 分类    │    模板列表区域     │ 预览    │  │
│ │ 树形    │                    │ 区域    │  │
│ │ 菜单    │                    │         │  │
│ └─────────┘                    └─────────┘  │
├─────────────────────────────────────────────┤
│              模板编辑和操作区域              │
└─────────────────────────────────────────────┘
```

### 具体区域设计

#### 1. 模板管理工具栏
- **模板操作按钮**:
  - 新建模板按钮
  - 导入模板功能
  - 批量导出模板
  - 模板同步功能
  - 批量删除模板
- **搜索和筛选**:
  - 模板名称搜索框
  - 设备类型筛选
  - 模板状态筛选
  - 创建人筛选
  - 高级搜索选项
- **视图控制**:
  - 列表/卡片视图切换
  - 排序方式选择
  - 显示字段配置
  - 分页大小设置

#### 2. 左侧模板分类树
- **分类结构**:
  - 按设备类型分类（路由器、交换机、防火墙）
  - 按功能模块分类（接口、路由、安全策略）
  - 按应用场景分类（数据中心、分支机构）
  - 自定义分类文件夹
- **分类管理**:
  - 创建/编辑/删除分类
  - 拖拽移动模板分类
  - 分类权限设置
  - 分类统计信息显示

#### 3. 中央模板列表区域
- **模板信息展示**:
  - 模板名称和描述
  - 模板适用设备类型
  - 模板创建者和时间
  - 模板最后修改时间
  - 模板版本号
  - 模板使用次数统计
- **模板状态指示**:
  - 模板状态（草稿/已发布/已废弃）
  - 模板验证状态
  - 模板共享权限状态
  - 模板锁定状态
- **快速操作**:
  - 模板预览按钮
  - 模板编辑按钮
  - 模板复制按钮
  - 模板删除按钮
  - 模板应用按钮

#### 4. 右侧模板预览区域
- **模板内容预览**:
  - 语法高亮的配置内容
  - 模板参数标识
  - 模板结构层次展示
  - 模板注释说明
- **模板信息面板**:
  - 模板详细属性
  - 模板变量列表
  - 模板依赖关系
  - 模板应用历史
- **预览控制**:
  - 代码折叠/展开
  - 搜索和替换功能
  - 格式化显示
  - 全屏预览模式

#### 5. 底部编辑和操作区域
- **模板编辑器**:
  - 代码编辑器（支持VyOS语法）
  - 语法错误检查
  - 自动补全功能
  - 参数变量插入
- **模板验证**:
  - 语法验证功能
  - 参数完整性检查
  - 模板兼容性验证
  - 验证结果显示
- **版本控制**:
  - 版本历史列表
  - 版本对比功能
  - 版本回滚操作
  - 版本发布管理

## 技术实现要点

### 模板引擎设计
- Jinja2模板引擎集成
- 自定义模板语法支持
- 模板变量类型系统
- 模板继承和包含机制

### 代码编辑器
- Monaco Editor集成
- VyOS配置语法高亮
- 代码自动补全
- 错误检查和提示

### 版本控制系统
- Git版本控制集成
- 模板变更历史跟踪
- 分支管理功能
- 合并冲突解决

### 模板验证引擎
- 配置语法验证
- 参数类型检查
- 依赖关系验证
- 兼容性测试

## 模板参数化设计

### 变量类型系统
- 字符串类型变量
- 数字类型变量
- IP地址类型变量
- 布尔类型变量
- 列表类型变量
- 对象类型变量

### 变量定义语法
```yaml
variables:
  interface_name:
    type: string
    description: "接口名称"
    default: "eth0"
    required: true
  ip_address:
    type: ip
    description: "IP地址"
    validation: "ipv4"
  vlan_ids:
    type: list
    description: "VLAN ID列表"
    items:
      type: integer
      range: [1, 4094]
```

### 条件渲染支持
- 基于变量值的条件渲染
- 循环渲染支持
- 嵌套条件逻辑
- 模板片段复用

## 用户交互设计

### 模板创建流程
- 向导式模板创建
- 模板类型选择
- 基础信息填写
- 内容编辑和验证
- 参数定义和测试

### 模板编辑体验
- 实时语法检查
- 智能代码提示
- 快捷键支持
- 撤销重做功能

### 模板应用流程
- 目标设备选择
- 参数值填写
- 预览生成结果
- 部署确认和执行

## 权限和安全

### 权限控制
- 模板查看权限
- 模板编辑权限
- 模板删除权限
- 模板应用权限

### 安全措施
- 模板内容审核
- 危险操作提示
- 操作日志记录
- 数据备份机制