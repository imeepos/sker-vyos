# 基础设施管理 - 设备发现页面

## 页面功能

### 核心功能
- **自动设备发现** - 自动发现网络中的设备
- **发现策略配置** - 配置设备发现规则和策略
- **发现结果管理** - 管理和处理发现的设备
- **设备识别分类** - 自动识别设备类型和厂商

### 详细功能列表
1. 网络扫描和设备发现
2. SNMP设备识别
3. 发现任务管理
4. 发现结果筛选
5. 设备信息自动收集
6. 批量设备导入
7. 发现历史记录
8. 重复设备检测

## 页面布局

### 整体布局结构
```
┌─────────────────────────────────────────────┐
│        发现任务配置和控制面板                │
├─────────────────────────────────────────────┤
│  ┌─────────┐  ┌─────────┐  ┌─────────┐      │
│  │发现任务 │  │发现进度 │  │发现统计 │      │
│  │数量     │  │         │  │         │      │
│  └─────────┘  └─────────┘  └─────────┘      │
├─────────────────────────────────────────────┤
│  ┌──────────────────┐  ┌──────────────────┐ │
│  │   发现任务列表    │  │   发现结果展示   │ │
│  │                  │  │                  │ │
│  └──────────────────┘  └──────────────────┘ │
├─────────────────────────────────────────────┤
│              发现设备详情和操作区域          │
└─────────────────────────────────────────────┘
```

### 具体区域设计

#### 1. 发现任务控制面板
- **发现配置**:
  - IP地址范围设置
  - 端口扫描配置
  - 发现协议选择
  - SNMP社区字符串
  - 超时时间设置
- **发现策略**:
  - 设备类型过滤
  - 厂商识别规则
  - 自动分组策略
  - 重复检测规则
- **快速操作**:
  - 开始发现按钮
  - 停止发现按钮
  - 清除结果按钮
  - 导出发现结果

#### 2. 发现状态卡片
- **发现任务数量卡片**:
  - 正在运行的任务数
  - 等待队列任务数
  - 已完成任务数
  - 失败任务数统计
- **发现进度卡片**:
  - 当前扫描进度
  - 已扫描IP数量
  - 发现设备数量
  - 预计完成时间
- **发现统计卡片**:
  - 总发现设备数
  - 新设备数量
  - 已知设备数量
  - 设备类型分布

#### 3. 发现任务和结果区域
- **左侧发现任务列表**:
  - 任务名称和描述
  - 任务创建时间
  - 任务执行状态
  - 发现范围显示
  - 任务进度指示
  - 任务操作按钮
- **右侧发现结果展示**:
  - 发现的设备列表
  - 设备基本信息
  - 设备连通状态
  - 设备类型图标
  - 设备信任状态
  - 导入操作按钮

#### 4. 设备详情和操作区域
- **设备详细信息**:
  - 设备MAC地址
  - 设备型号信息
  - 系统描述信息
  - 接口信息列表
  - SNMP信息详情
- **批量操作**:
  - 批量选择设备
  - 批量导入设备
  - 批量设置分组
  - 批量删除结果

## 技术实现要点

### 设备发现引擎
- Nmap网络扫描集成
- SNMP设备信息获取
- 多线程并发扫描
- 自适应扫描速度

### 设备识别算法
- 设备指纹识别
- OUI厂商识别
- SNMP MIB解析
- 系统描述分析

### 发现任务调度
- 任务队列管理
- 优先级调度
- 资源限制控制
- 失败重试机制

### 重复检测机制
- MAC地址去重
- IP地址对比
- 设备指纹匹配
- 智能合并策略

## 发现策略配置

### 扫描策略
- ICMP ping扫描
- TCP端口扫描
- UDP服务发现
- SNMP设备查询

### 识别规则
- 厂商OUI映射
- 设备型号匹配
- 系统描述解析
- 服务端口识别

### 过滤条件
- 设备类型筛选
- 厂商品牌过滤
- IP地址范围限制
- 响应时间阈值

## 用户交互设计

### 发现向导流程
- 发现目标配置
- 扫描参数设置
- 发现策略选择
- 任务执行监控

### 实时进度显示
- 扫描进度条
- 发现设备计数
- 任务状态更新
- 错误信息提示

### 结果处理流程
- 发现结果预览
- 设备信息确认
- 批量导入选择
- 导入后处理

## 权限控制
- 设备发现执行权限
- 发现结果查看权限
- 设备导入操作权限
- 发现配置修改权限